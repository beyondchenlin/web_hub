# TTSè®ºå›é›†æˆç³»ç»Ÿ - ä½¿ç”¨æ–‡æ¡£

**ç‰ˆæœ¬**: 1.0.0  
**æ›´æ–°æ—¶é—´**: 2025-11-03  
**é€‚ç”¨ç¯å¢ƒ**: Windows 10/11, Python 3.10+

---

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿç®€ä»‹](#ç³»ç»Ÿç®€ä»‹)
2. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
3. [ç¯å¢ƒé…ç½®](#ç¯å¢ƒé…ç½®)
4. [å¯åŠ¨ç³»ç»Ÿ](#å¯åŠ¨ç³»ç»Ÿ)
5. [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
6. [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
7. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
8. [APIæ¥å£](#apiæ¥å£)
9. [æ•…éšœæ’æŸ¥](#æ•…éšœæ’æŸ¥)

---

## ç³»ç»Ÿç®€ä»‹

### åŠŸèƒ½æ¦‚è¿°

TTSè®ºå›é›†æˆç³»ç»Ÿæ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„è¯­éŸ³åˆæˆæœåŠ¡å¹³å°ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è®ºå›å‘å¸–çš„æ–¹å¼ï¼š

1. **éŸ³è‰²å…‹éš†** - ä¸Šä¼ éŸ³é¢‘æ ·æœ¬ï¼Œå…‹éš†è‡ªå·±çš„å£°éŸ³
2. **AIè¯­éŸ³ç”Ÿæˆ** - ä½¿ç”¨å·²æœ‰éŸ³è‰²ç”ŸæˆAIè¯­éŸ³

ç³»ç»Ÿä¼šè‡ªåŠ¨ç›‘æ§è®ºå›å¸–å­ï¼Œå¤„ç†è¯·æ±‚ï¼Œç”ŸæˆéŸ³é¢‘ï¼Œå¹¶å›å¤åˆ°è®ºå›ã€‚

### æ ¸å¿ƒç‰¹æ€§

- âœ… **è‡ªåŠ¨ç›‘æ§** - å®æ—¶ç›‘æ§è®ºå›æ–°å¸–
- âœ… **æ™ºèƒ½è¯†åˆ«** - 99%å‡†ç¡®ç‡è¯†åˆ«ç”¨æˆ·è¯·æ±‚
- âœ… **æƒé™ç®¡ç†** - å…¬å…±/ç§æœ‰éŸ³è‰²æƒé™æ§åˆ¶
- âœ… **é…é¢ç®¡ç†** - éŸ³è‰²æ•°é‡å’Œå­˜å‚¨ç©ºé—´é™åˆ¶
- âœ… **Webç›‘æ§** - å®æ—¶æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€å’Œä»»åŠ¡è¿›åº¦

### ç³»ç»Ÿæ¶æ„

```
è®ºå›å‘å¸– â†’ ç›‘æ§èŠ‚ç‚¹ â†’ è¯·æ±‚è§£æ â†’ æƒé™éªŒè¯ â†’ TTSå¤„ç† â†’ è®ºå›å›å¤
```

---

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

1. **Pythonç¯å¢ƒ**: `D:\index-tts-2-6G-0914\index-tts-2\tts\indextts2\py312\python.exe`
2. **RedisæœåŠ¡**: ç”¨äºä»»åŠ¡é˜Ÿåˆ—ç®¡ç†ï¼ˆå·¥ä½œèŠ‚ç‚¹å¿…éœ€ï¼‰
3. **ç½‘ç»œè¿æ¥**: è®¿é—®è®ºå› `https://tts.lrtcai.com`
4. **Waitress**: ç”Ÿäº§çº§WSGIæœåŠ¡å™¨ï¼ˆæ¨èï¼Œå·²é¢„è£…ï¼‰

### ä¸€é”®å¯åŠ¨ â­

**æ¨èæ–¹å¼ï¼ˆå®Œæ•´ç³»ç»Ÿï¼‰**ï¼š
```bash
# åŒå‡»è¿è¡Œ
å¯åŠ¨å®Œæ•´ç³»ç»Ÿ.bat
```

**åŠŸèƒ½**ï¼š
- âœ… è‡ªåŠ¨å¯åŠ¨ç›‘æ§èŠ‚ç‚¹ + å·¥ä½œèŠ‚ç‚¹
- âœ… å®Œæ•´çš„ç¯å¢ƒæ£€æŸ¥
- âœ… è‡ªåŠ¨æ‰“å¼€Webç•Œé¢
- âœ… ä½¿ç”¨ç”Ÿäº§çº§æœåŠ¡å™¨ï¼ˆWaitressï¼‰

**å•ç‹¬å¯åŠ¨ç›‘æ§èŠ‚ç‚¹**ï¼š
```bash
# åŒå‡»è¿è¡Œ
å¯åŠ¨ç›‘æ§èŠ‚ç‚¹.bat
```

**å•ç‹¬å¯åŠ¨å·¥ä½œèŠ‚ç‚¹**ï¼š
```bash
# åŒå‡»è¿è¡Œ
å¯åŠ¨å·¥ä½œèŠ‚ç‚¹.bat
```

**å‘½ä»¤è¡Œå¯åŠ¨**ï¼š
```bash
# ç›‘æ§èŠ‚ç‚¹
"tts/indextts2/py312/python.exe" web_hub/cluster_monitor/start_unified.py --mode production --port 8000

# å·¥ä½œèŠ‚ç‚¹
"tts/indextts2/py312/python.exe" web_hub/start_lightweight.py --port 8005
```

å¯åŠ¨æˆåŠŸåï¼Œè®¿é—®ï¼š
- ç›‘æ§èŠ‚ç‚¹ï¼š`http://localhost:8000`
- å·¥ä½œèŠ‚ç‚¹ï¼š`http://localhost:8005`

---

## ç¯å¢ƒé…ç½®

### 1. é…ç½®è®ºå›è´¦å·

ç¼–è¾‘ `web_hub/.env` æ–‡ä»¶ï¼ˆå¦‚ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼‰ï¼š

```bash
# è®ºå›è´¦å·é…ç½®
FORUM_USERNAME=AIå‰ªè¾‘åŠ©æ‰‹
FORUM_PASSWORD=ä½ çš„è®ºå›å¯†ç 

# ç³»ç»Ÿé…ç½®
TASK_DISPATCH_MODE=lightweight
FORUM_TEST_MODE=false
```

### 2. é…ç½®è®ºå›è®¾ç½®

ç¼–è¾‘ `config/forum_settings.yaml`ï¼š

```yaml
forum:
  base_url: https://tts.lrtcai.com
  target_url: https://tts.lrtcai.com/forum-2-1.html
  forum_id: 2
  check_interval: 10  # æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰

credentials:
  username: AIå‰ªè¾‘åŠ©æ‰‹
  password: ${FORUM_PASSWORD}  # ä»ç¯å¢ƒå˜é‡è¯»å–
```

### 3. æ•°æ®åº“åˆå§‹åŒ–

ç³»ç»Ÿé¦–æ¬¡å¯åŠ¨ä¼šè‡ªåŠ¨åˆå§‹åŒ–æ•°æ®åº“ï¼š

```bash
"tts/indextts2/py312/python.exe" tts/custom_integration/integration/tts_init_db.py
```

æ•°æ®åº“ä½ç½®ï¼š`tts/custom_integration/integration/database/tts_voice_system.db`

---

## å¯åŠ¨ç³»ç»Ÿ

### æ–¹å¼1ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰â­

#### å¯åŠ¨å®Œæ•´ç³»ç»Ÿï¼ˆä¸€é”®å¯åŠ¨ï¼‰

```bash
å¯åŠ¨å®Œæ•´ç³»ç»Ÿ.bat
```

**åŠŸèƒ½**ï¼š
- âœ… è‡ªåŠ¨å¯åŠ¨ç›‘æ§èŠ‚ç‚¹ï¼ˆç«¯å£8000ï¼‰
- âœ… è‡ªåŠ¨å¯åŠ¨å·¥ä½œèŠ‚ç‚¹ï¼ˆç«¯å£8005ï¼‰
- âœ… å®Œæ•´çš„ç¯å¢ƒæ£€æŸ¥
- âœ… è‡ªåŠ¨æ‰“å¼€Webç•Œé¢
- âœ… ä½¿ç”¨ç”Ÿäº§çº§æœåŠ¡å™¨ï¼ˆWaitressï¼‰

#### å•ç‹¬å¯åŠ¨ç›‘æ§èŠ‚ç‚¹

```bash
å¯åŠ¨ç›‘æ§èŠ‚ç‚¹.bat
```

**åŠŸèƒ½**ï¼š
- âœ… æ£€æŸ¥Pythonç¯å¢ƒ
- âœ… æ£€æŸ¥å¹¶åˆå§‹åŒ–æ•°æ®åº“
- âœ… æ£€æŸ¥Redisè¿æ¥
- âœ… å¯åŠ¨ç›‘æ§èŠ‚ç‚¹ï¼ˆç«¯å£8000ï¼‰
- âœ… ä½¿ç”¨ç”Ÿäº§çº§æœåŠ¡å™¨ï¼ˆWaitress/Gunicornï¼‰

#### å•ç‹¬å¯åŠ¨å·¥ä½œèŠ‚ç‚¹

```bash
å¯åŠ¨å·¥ä½œèŠ‚ç‚¹.bat
```

**åŠŸèƒ½**ï¼š
- âœ… æ£€æŸ¥Pythonç¯å¢ƒ
- âœ… æ£€æŸ¥Waitressæ˜¯å¦å®‰è£…
- âœ… æ£€æŸ¥Redisè¿æ¥ï¼ˆå¿…éœ€ï¼‰
- âœ… æ£€æŸ¥ç›‘æ§èŠ‚ç‚¹çŠ¶æ€
- âœ… å¯åŠ¨å·¥ä½œèŠ‚ç‚¹ï¼ˆç«¯å£8005ï¼‰
- âœ… ä½¿ç”¨ç”Ÿäº§çº§æœåŠ¡å™¨ï¼ˆWaitressï¼‰

### æ–¹å¼2ï¼šæ‰‹åŠ¨å¯åŠ¨

#### å¯åŠ¨ç›‘æ§èŠ‚ç‚¹

```bash
cd web_hub/cluster_monitor
"../../tts/indextts2/py312/python.exe" start_unified.py --mode production --port 8000
```

**è¯´æ˜**ï¼š
- ç”Ÿäº§æ¨¡å¼è‡ªåŠ¨ä½¿ç”¨Waitressï¼ˆWindowsï¼‰æˆ–Gunicornï¼ˆLinuxï¼‰
- æ— å¼€å‘æœåŠ¡å™¨è­¦å‘Šä¿¡æ¯

#### å¯åŠ¨å·¥ä½œèŠ‚ç‚¹

```bash
"tts/indextts2/py312/python.exe" web_hub/start_lightweight.py --port 8005
```

**è¯´æ˜**ï¼š
- è‡ªåŠ¨æ£€æµ‹å¹¶ä½¿ç”¨Waitressç”Ÿäº§æœåŠ¡å™¨
- å¦‚æœWaitressæœªå®‰è£…ï¼Œè‡ªåŠ¨å›é€€åˆ°Flaskå¼€å‘æœåŠ¡å™¨

### ç”Ÿäº§çº§æœåŠ¡å™¨è¯´æ˜ ğŸš€

ç³»ç»Ÿå·²å‡çº§ä½¿ç”¨ç”Ÿäº§çº§WSGIæœåŠ¡å™¨ï¼š

**ç›‘æ§èŠ‚ç‚¹**ï¼š
- Windows: Waitress
- Linux: Gunicorn

**å·¥ä½œèŠ‚ç‚¹**ï¼š
- Windows: Waitressï¼ˆæ¨èï¼‰
- Linux: Waitressï¼ˆæ¨èï¼‰

**ä¼˜åŠ¿**ï¼š
- âœ… å¤šçº¿ç¨‹å¹¶å‘å¤„ç†ï¼ˆ4çº¿ç¨‹ï¼‰
- âœ… é«˜æ€§èƒ½ã€é«˜ç¨³å®šæ€§
- âœ… æ— å¼€å‘æœåŠ¡å™¨è­¦å‘Š
- âœ… é€‚åˆç”Ÿäº§ç¯å¢ƒ

**ä¾èµ–æ£€æŸ¥**ï¼š
```bash
# æ£€æŸ¥Waitressæ˜¯å¦å®‰è£…
"tts/indextts2/py312/python.exe" -c "import waitress; print(waitress.__version__)"

# å¦‚æœæœªå®‰è£…ï¼ˆå¯é€‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å›é€€ï¼‰
"tts/indextts2/py312/python.exe" -m pip install waitress
```

### éªŒè¯å¯åŠ¨

è®¿é—® `http://localhost:8000`ï¼ˆç›‘æ§èŠ‚ç‚¹ï¼‰æˆ– `http://localhost:8005`ï¼ˆå·¥ä½œèŠ‚ç‚¹ï¼‰ï¼Œåº”è¯¥çœ‹åˆ°ï¼š

**ç›‘æ§èŠ‚ç‚¹**ï¼š
- ğŸŸ¢ **ç³»ç»ŸçŠ¶æ€**: åœ¨çº¿
- ğŸŸ¢ **Redisè¿æ¥**: æ­£å¸¸
- ğŸŸ¢ **æ•°æ®åº“**: æ­£å¸¸
- ğŸŸ¢ **è®ºå›ç›‘æ§**: è¿è¡Œä¸­
- ğŸš€ **æœåŠ¡å™¨**: Waitressç”Ÿäº§æœåŠ¡å™¨

**å·¥ä½œèŠ‚ç‚¹**ï¼š
- ğŸŸ¢ **ç³»ç»ŸçŠ¶æ€**: åœ¨çº¿
- ğŸŸ¢ **ä»»åŠ¡é˜Ÿåˆ—**: æ­£å¸¸
- ğŸŸ¢ **èµ„æºç›‘æ§**: æ­£å¸¸
- ğŸš€ **æœåŠ¡å™¨**: Waitressç”Ÿäº§æœåŠ¡å™¨

---

## ä½¿ç”¨æŒ‡å—

### ç”¨æˆ·æ“ä½œæµç¨‹

#### 1. éŸ³è‰²å…‹éš†

åœ¨è®ºå›å‘å¸–ï¼š

**æ ‡é¢˜**ï¼š
```
ã€éŸ³è‰²å…‹éš†ã€‘æˆ‘çš„å£°éŸ³å…‹éš†
```

**å†…å®¹**ï¼š
```
ã€éŸ³è‰²åç§°ã€‘æˆ‘çš„ä¸“å±éŸ³è‰²
ã€æ˜¯å¦å…¬å¼€ã€‘å¦
```

**é™„ä»¶**ï¼šä¸Šä¼ ä¸€ä¸ªéŸ³é¢‘æ–‡ä»¶ï¼ˆWAV/MP3æ ¼å¼ï¼Œå»ºè®®10-30ç§’ï¼‰

**ç³»ç»Ÿå¤„ç†**ï¼š
1. ç›‘æ§åˆ°æ–°å¸–
2. ä¸‹è½½éŸ³é¢‘æ–‡ä»¶
3. è®­ç»ƒéŸ³è‰²æ¨¡å‹
4. ä¿å­˜åˆ°æ•°æ®åº“
5. å›å¤å¤„ç†ç»“æœ

#### 2. AIè¯­éŸ³ç”Ÿæˆ

åœ¨è®ºå›å‘å¸–ï¼š

**æ ‡é¢˜**ï¼š
```
ã€åˆ¶ä½œAIå£°éŸ³ã€‘ç”Ÿæˆè¯­éŸ³
```

**å†…å®¹**ï¼š
```
ã€æ–‡æ¡ˆã€‘å¤§å®¶å¥½ï¼Œæ¬¢è¿æ¥åˆ°æˆ‘çš„é¢‘é“ï¼ä»Šå¤©æˆ‘ä»¬æ¥èŠèŠäººå·¥æ™ºèƒ½ã€‚
ã€é€‰æ‹©éŸ³è‰²ã€‘æˆ‘çš„ä¸“å±éŸ³è‰²
ã€è¯­é€Ÿã€‘1.0
ã€éŸ³è°ƒã€‘1.0
```

**ç³»ç»Ÿå¤„ç†**ï¼š
1. ç›‘æ§åˆ°æ–°å¸–
2. éªŒè¯éŸ³è‰²æƒé™
3. ç”ŸæˆAIè¯­éŸ³
4. ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶
5. å›å¤ä¸‹è½½é“¾æ¥

### ç®¡ç†å‘˜æ“ä½œ

#### æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€

è®¿é—® `http://localhost:8000`ï¼Œå¯ä»¥çœ‹åˆ°ï¼š

- **ç³»ç»Ÿæ¦‚è§ˆ** - CPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨ç‡
- **ä»»åŠ¡åˆ—è¡¨** - å½“å‰å¤„ç†ä¸­çš„ä»»åŠ¡
- **ç”¨æˆ·ç»Ÿè®¡** - ç”¨æˆ·æ•°é‡ã€éŸ³è‰²æ•°é‡
- **æ—¥å¿—æŸ¥çœ‹** - å®æ—¶ç³»ç»Ÿæ—¥å¿—

#### ç®¡ç†ç”¨æˆ·é…é¢

ç¼–è¾‘æ•°æ®åº“æˆ–ä½¿ç”¨APIï¼š

```python
# ä¿®æ”¹ç”¨æˆ·é…é¢
UPDATE users 
SET voice_quota = 50, storage_quota_mb = 1000 
WHERE user_id = 'forum_12345';
```

#### ç®¡ç†å…¬å…±éŸ³è‰²

```python
# è®¾ç½®éŸ³è‰²ä¸ºå…¬å…±
UPDATE voices 
SET is_public = 1 
WHERE voice_id = 'voice_id_here';
```

---

## é…ç½®è¯´æ˜

### è®ºå›é…ç½® (`config/forum_settings.yaml`)

```yaml
forum:
  base_url: https://tts.lrtcai.com        # è®ºå›åŸºç¡€URL
  target_url: https://tts.lrtcai.com/forum-2-1.html  # ç›‘æ§æ¿å—
  forum_id: 2                              # æ¿å—ID
  check_interval: 10                       # æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰
  max_retries: 3                          # æœ€å¤§é‡è¯•æ¬¡æ•°
  timeout: 30                             # è¯·æ±‚è¶…æ—¶ï¼ˆç§’ï¼‰

credentials:
  username: AIå‰ªè¾‘åŠ©æ‰‹                     # è®ºå›è´¦å·
  password: ${FORUM_PASSWORD}             # ä»ç¯å¢ƒå˜é‡è¯»å–

processing:
  max_concurrent_tasks: 5                 # æœ€å¤§å¹¶å‘ä»»åŠ¡æ•°
  task_timeout: 300                       # ä»»åŠ¡è¶…æ—¶ï¼ˆç§’ï¼‰
```

### ç”¨æˆ·é…é¢é…ç½®

é»˜è®¤é…é¢ï¼ˆåœ¨ `tts_init_db.py` ä¸­å®šä¹‰ï¼‰ï¼š

```python
voice_quota = 20           # æ¯ä¸ªç”¨æˆ·æœ€å¤š20ä¸ªéŸ³è‰²
storage_quota_mb = 500     # æ¯ä¸ªç”¨æˆ·æœ€å¤š500MBå­˜å‚¨ç©ºé—´
```

### æ—¥å¿—é…ç½®

æ—¥å¿—æ–‡ä»¶ä½ç½®ï¼š
- `logs/forum_monitor.log` - è®ºå›ç›‘æ§æ—¥å¿—
- `logs/tts_forum_monitor.log` - TTSå¤„ç†æ—¥å¿—
- `logs/error.log` - é”™è¯¯æ—¥å¿—
- `logs/lightweight.log` - å·¥ä½œèŠ‚ç‚¹æ—¥å¿—

---

## å¸¸è§é—®é¢˜

### Q1: å¯åŠ¨åæ— æ³•è®¿é—®Webç•Œé¢ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼š`netstat -ano | findstr 8000`
2. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
3. å°è¯•ä½¿ç”¨å…¶ä»–ç«¯å£ï¼š`--port 8001`

### Q2: è®ºå›ç›‘æ§ä¸å·¥ä½œï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥è®ºå›è´¦å·å¯†ç æ˜¯å¦æ­£ç¡®
2. æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼š`ping tts.lrtcai.com`
3. æŸ¥çœ‹æ—¥å¿—ï¼š`logs/forum_monitor.log`
4. æ£€æŸ¥Redisæ˜¯å¦è¿è¡Œï¼š`redis-cli ping`

### Q3: ç”¨æˆ·æ— æ³•ä½¿ç”¨æŸä¸ªéŸ³è‰²ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥éŸ³è‰²æ˜¯å¦ä¸ºå…¬å…±éŸ³è‰²
2. æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ä¸ºéŸ³è‰²æ‰€æœ‰è€…
3. æŸ¥çœ‹æƒé™æ—¥å¿—ç¡®è®¤æ‹’ç»åŸå› 

### Q4: æ•°æ®åº“é”™è¯¯ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# é‡æ–°åˆå§‹åŒ–æ•°æ®åº“
"tts/indextts2/py312/python.exe" tts/custom_integration/integration/tts_init_db.py
```

### Q5: å¦‚ä½•åœæ­¢ç³»ç»Ÿï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
- åœ¨å¯åŠ¨çª—å£æŒ‰ `Ctrl+C`
- æˆ–å…³é—­å‘½ä»¤è¡Œçª—å£

### Q6: çœ‹åˆ°"WARNING: This is a development server"è­¦å‘Šï¼Ÿ

**è¯´æ˜**ï¼šè¿™ä¸æ˜¯é”™è¯¯ï¼è¿™æ˜¯Flaskçš„è­¦å‘Šä¿¡æ¯ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
ç³»ç»Ÿå·²å‡çº§ä½¿ç”¨Waitressç”Ÿäº§æœåŠ¡å™¨ï¼Œä¸ä¼šå†æ˜¾ç¤ºæ­¤è­¦å‘Šã€‚

å¦‚æœä»ç„¶çœ‹åˆ°è­¦å‘Šï¼š
```bash
# 1. æ£€æŸ¥Waitressæ˜¯å¦å®‰è£…
"tts/indextts2/py312/python.exe" -c "import waitress; print(waitress.__version__)"

# 2. å¦‚æœæœªå®‰è£…ï¼Œå®‰è£…Waitress
"tts/indextts2/py312/python.exe" -m pip install waitress

# 3. é‡æ–°å¯åŠ¨ç³»ç»Ÿ
å¯åŠ¨å·¥ä½œèŠ‚ç‚¹.bat
```

**é¢„æœŸè¾“å‡º**ï¼ˆWaitresså·²å®‰è£…ï¼‰ï¼š
```
ğŸš€ ä½¿ç”¨Waitressç”Ÿäº§æœåŠ¡å™¨
INFO:waitress:Serving on http://0.0.0.0:8005
âœ… ç³»ç»Ÿå¯åŠ¨æˆåŠŸï¼
```

**æ€§èƒ½æå‡**ï¼š
- âœ… å¤šçº¿ç¨‹å¹¶å‘å¤„ç†ï¼ˆ4çº¿ç¨‹ï¼‰
- âœ… æ›´é«˜çš„æ€§èƒ½å’Œç¨³å®šæ€§
- âœ… é€‚åˆç”Ÿäº§ç¯å¢ƒ
- âœ… æ— è­¦å‘Šä¿¡æ¯

---

## APIæ¥å£

### ç³»ç»ŸçŠ¶æ€

```http
GET http://localhost:8000/api/status
```

**å“åº”**ï¼š
```json
{
  "status": "online",
  "redis": "connected",
  "database": "connected",
  "forum_monitor": "running"
}
```

### ä»»åŠ¡åˆ—è¡¨

```http
GET http://localhost:8000/api/tasks
```

**å“åº”**ï¼š
```json
{
  "tasks": [
    {
      "task_id": "task_123",
      "type": "voice_clone",
      "status": "processing",
      "user_id": "forum_12345"
    }
  ]
}
```

### ç”¨æˆ·ä¿¡æ¯

```http
GET http://localhost:8000/api/users/{user_id}
```

**å“åº”**ï¼š
```json
{
  "user_id": "forum_12345",
  "username": "å¼ ä¸‰",
  "voice_quota": 20,
  "storage_quota_mb": 500,
  "voices_count": 3,
  "storage_used_mb": 45.6
}
```

---

## æ•…éšœæ’æŸ¥

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹æœ€æ–°æ—¥å¿—
tail -f logs/forum_monitor.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f logs/error.log

# æœç´¢ç‰¹å®šé”™è¯¯
grep "ERROR" logs/*.log
```

### æ•°æ®åº“æ£€æŸ¥

```bash
# è¿›å…¥æ•°æ®åº“
sqlite3 tts/custom_integration/integration/database/tts_voice_system.db

# æŸ¥çœ‹ç”¨æˆ·
SELECT * FROM users;

# æŸ¥çœ‹éŸ³è‰²
SELECT * FROM voices;

# é€€å‡º
.quit
```

### Redisæ£€æŸ¥

```bash
# æ£€æŸ¥Redisè¿æ¥
redis-cli ping

# æŸ¥çœ‹é˜Ÿåˆ—
redis-cli LLEN task_queue

# æŸ¥çœ‹æ‰€æœ‰é”®
redis-cli KEYS *
```

### ç³»ç»Ÿé‡å¯

```bash
# 1. åœæ­¢æ‰€æœ‰æœåŠ¡
Ctrl+C

# 2. æ¸…ç†Redisï¼ˆå¯é€‰ï¼‰
redis-cli FLUSHALL

# 3. é‡æ–°å¯åŠ¨
å¯åŠ¨å®Œæ•´ç³»ç»Ÿ.bat
```

---

## é™„å½•

### ç›®å½•ç»“æ„

```
index-tts-2/
â”œâ”€â”€ config/                    # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ forum_settings.yaml
â”œâ”€â”€ tts/                       # TTSç›¸å…³
â”‚   â””â”€â”€ custom_integration/
â”‚       â””â”€â”€ integration/
â”‚           â”œâ”€â”€ tts_forum_processor.py    # æ ¸å¿ƒå¤„ç†å™¨
â”‚           â”œâ”€â”€ tts_forum_sync.py         # ç”¨æˆ·åŒæ­¥
â”‚           â”œâ”€â”€ tts_permission_manager.py # æƒé™ç®¡ç†
â”‚           â””â”€â”€ database/
â”‚               â””â”€â”€ tts_voice_system.db   # æ•°æ®åº“
â”œâ”€â”€ web_hub/                   # Webé›†ç¾¤ç³»ç»Ÿ
â”‚   â”œâ”€â”€ cluster_monitor/       # ç›‘æ§èŠ‚ç‚¹
â”‚   â”‚   â”œâ”€â”€ start_unified.py
â”‚   â”‚   â””â”€â”€ forum_monitor.py
â”‚   â””â”€â”€ lightweight/           # å·¥ä½œèŠ‚ç‚¹
â”‚       â””â”€â”€ web_server.py      # WebæœåŠ¡å™¨ï¼ˆä½¿ç”¨Waitressï¼‰
â”œâ”€â”€ logs/                      # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ å¯åŠ¨å®Œæ•´ç³»ç»Ÿ.bat           # ä¸€é”®å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
â”œâ”€â”€ å¯åŠ¨ç›‘æ§èŠ‚ç‚¹.bat           # ç›‘æ§èŠ‚ç‚¹å¯åŠ¨è„šæœ¬
â””â”€â”€ å¯åŠ¨å·¥ä½œèŠ‚ç‚¹.bat           # å·¥ä½œèŠ‚ç‚¹å¯åŠ¨è„šæœ¬
```

### ç›¸å…³æ–‡æ¡£

- `ä½¿ç”¨æ–‡æ¡£.md` - æœ¬æ–‡æ¡£ï¼Œç³»ç»Ÿä½¿ç”¨æŒ‡å—
- `Waitressç”Ÿäº§æœåŠ¡å™¨å‡çº§è¯´æ˜.md` - Waitresså‡çº§è¯¦è§£
- `docs/æ–¹æ¡ˆB-TTSç»Ÿä¸€æ•´åˆæ¶æ„æ–¹æ¡ˆ.md` - ç³»ç»Ÿæ¶æ„è®¾è®¡
- `web_hub/docs/å¦‚ä½•å¯åŠ¨ç³»ç»Ÿ.md` - å¯åŠ¨æŒ‡å—

### æŠ€æœ¯æ ˆ

**æ ¸å¿ƒæŠ€æœ¯**ï¼š
- Python 3.10.18
- Flask - Webæ¡†æ¶
- Waitress - ç”Ÿäº§çº§WSGIæœåŠ¡å™¨ï¼ˆWindowsï¼‰
- Redis - ä»»åŠ¡é˜Ÿåˆ—
- SQLite - æ•°æ®å­˜å‚¨

**ç”Ÿäº§çº§æœåŠ¡å™¨**ï¼š
- ç›‘æ§èŠ‚ç‚¹ï¼šWaitressï¼ˆWindowsï¼‰/ Gunicornï¼ˆLinuxï¼‰
- å·¥ä½œèŠ‚ç‚¹ï¼šWaitressï¼ˆè·¨å¹³å°ï¼‰

### æŠ€æœ¯æ”¯æŒ

- **GitHub**: https://github.com/beyondchenlin/web_hub
- **è®ºå›**: https://tts.lrtcai.com
- **é‚®ç®±**: beyondchenlin@users.noreply.github.com

---

**æœ€åæ›´æ–°**: 2025-11-03
**æ–‡æ¡£ç‰ˆæœ¬**: 2.0.0 - æ·»åŠ Waitressç”Ÿäº§æœåŠ¡å™¨æ”¯æŒ

