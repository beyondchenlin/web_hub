# 🍎 FunClip 第2层：Apple M4平台层依赖
# Layer 2: Apple M4 Platform Dependencies
# 
# 职责：提供Apple M4芯片的硬件加速支持
# 大小：约200MB
# 平台：Apple Silicon M4 (macOS)

# ==========================================
# PyTorch Apple Silicon优化版本
# ==========================================
torch>=2.6.0,<3.0.0
torchaudio>=2.6.0,<3.0.0
torchvision>=0.21.0,<1.0.0

# ==========================================
# Apple M4优化的科学计算
# ==========================================
numba>=0.58.0,<1.0.0
llvmlite>=0.40.0,<1.0.0

# ==========================================
# 音频处理Apple优化
# ==========================================
resampy>=0.4.0,<1.0.0

# ==========================================
# 视频处理Apple支持
# ==========================================
av>=10.0.0,<11.0.0

# ==========================================
# 图像处理Apple支持
# ==========================================
imageio>=2.31.0,<3.0.0

# ==========================================
# Apple特定优化库
# ==========================================
# 注意：以下库需要Apple Silicon原生支持
# accelerate>=0.25.0  # Apple Metal Performance Shaders
# coremltools>=7.0.0  # Core ML模型转换

# ==========================================
# 版本说明
# ==========================================
# torch: 支持Apple Metal Performance Shaders (MPS)
# numba: 支持Apple Silicon ARM64架构
# av: 支持Apple VideoToolbox硬件编解码

# ==========================================
# Apple M4特性
# ==========================================
# 1. Metal Performance Shaders (MPS) GPU加速
# 2. 统一内存架构，CPU/GPU共享内存
# 3. 高能效比，低功耗高性能
# 4. 原生ARM64架构优化

# ==========================================
# 验证Apple M4支持
# ==========================================
# python -c "import torch; print(f'MPS可用: {torch.backends.mps.is_available()}')"
# python -c "import platform; print(f'架构: {platform.machine()}')"
# python -c "import torch; print(f'MPS内置: {torch.backends.mps.is_built()}')"

# ==========================================
# 安装注意事项
# ==========================================
# 1. 确保macOS版本 >= 12.3 (支持Metal 3)
# 2. 使用Homebrew安装系统依赖
# 3. 建议使用conda-forge源安装
# 4. 某些包可能需要从源码编译

# ==========================================
# 设计原则
# ==========================================
# 1. 原生优化：充分利用Apple Silicon架构
# 2. 能效优先：平衡性能和功耗
# 3. 生态兼容：与macOS生态深度集成
# 4. 未来导向：支持Apple最新硬件特性
